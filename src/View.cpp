#include "View.h"

View::View() {
    Init();
}

void View::Init() {
    initscr();

    noecho();
    curs_set(0); 
    start_color();


    init_pair(1, COLOR_BLACK, COLOR_WHITE);
    bkgd(COLOR_PAIR(1));
}

// void View::Draw() {
//     DrawGame();
//     DrawScore();
//     refresh();
// }

void View::DrawGame() {

    gameWin = newwin(30, 30, 0, 0);
    wbkgd(gameWin, COLOR_PAIR(1));
    wattron(gameWin, COLOR_PAIR(1));

    box(gameWin, '-', '-');

    /*
    0 = background
    10 = ─
    11 = │
    12 = ┌
    13 = ┐
    14 = ┘
    15 = └
    20 = ┌
    21 = ┐
    22 = ┘
    23 = └
    */ 

    int map[21][21] = {
    {2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,3,4,4,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2},
    };


    for(int i=0; i<21; i++) {
        for(int j=0; j<42; j++) {

            int pos = map[i][j/2];

            if(pos == 0) {
                mvaddch(i, j, ' ');
            }
            else if(pos == 1 || pos == 2) {
                mvaddch(i, j, ACS_BOARD);
            }
            else if(pos == 3) {
                mvaddch(i, j, 'O');
            }
            else if(pos == 4) {
                mvaddch(i, j, 'o');
            }
            mvaddch(i, ++j, ' ');
        }
    }
    wrefresh(gameWin);
}

/* 테스트용 코드 */
int main() {
    View test;
    test.Init();
    test.DrawGame();
    getch();
    delwin(test.gameWin);
    endwin();
}